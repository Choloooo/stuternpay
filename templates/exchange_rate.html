<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Your existing head content remains unchanged -->

    <style>
      /* Your existing styles remain unchanged */

      body {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 10px;
        background: #caf5e1;
      }

      .wrapper {
        width: 370px;
        padding: 30px;
        border-radius: 7px;
        background: #fff;
        box-shadow: 7px 7px 20px rgba(0, 0, 0, 0.05);
      }

      .wrapper header {
        font-size: 28px;
        font-weight: 500;
        text-align: center;
        margin-bottom: 20px;
      }

      .wrapper form {
        margin: 20px 0;
      }

      /* Add the new styles for the navigation */
      .nav {
        display: flex;
        background-color: #333;
        position: fixed;
        top: 0;
        width: 100%;
        justify-content: center;
        z-index: 1000; /* Ensure it's above other elements */
      }

      .nav a {
        color: white;
        padding: 14px 16px;
        text-decoration: none;
      }

      .nav a:hover {
        background-color: #ddd;
        color: black;
      }

      /* Add styles for the content containers */
      .content {
        display: none;
        text-align: center;
        margin-top: 60px;
      }

      .content.active {
        display: block;
      }
      .select-box {
        display: flex;
        align-items: center;
        border: 1px solid #999; /* Add border style here */
        border-radius: 5px; /* Optional: Add border-radius for rounded corners */
        padding: 5px; /* Optional: Add padding for better visual appearance */
      }

      .select-box img {
        max-width: 21px;
        margin-right: 5px;
      }

      .select-box select {
        font-size: 16px;
        background: none;
        flex: 1;
        margin-left: 10px;
      }
      div.select-box.select-boxx {
        border-radius: 2px solid #999;
      }
      p {
        text-align: left;
      }
      .wrapper {
        width: 370px;
        padding: 30px;
        border-radius: 7px;
        background: #fff;
        box-shadow: 7px 7px 20px rgba(0, 0, 0, 0.05);
      }

      .wrapper header {
        font-size: 28px;
        font-weight: 500;
        text-align: center;
        margin-bottom: 20px;
      }

      .wrapper form {
        margin: 20px 0;
      }

      .form-container {
        max-width: 400px;
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      form input {
        height: 50px;
        font-size: 17px;
        padding: 0 15px;
        border: 1px solid #999;
      }

      form button {
        height: 52px;
        color: #fff;
        font-size: 17px;
        cursor: pointer;
        background: #675afe;
        transition: 0.3s ease;
      }

      form input {
        height: 50px; /* Adjust this value as needed */
        font-size: 17px;
        padding: 0 15px;
        border: 1px solid #999;
      }

      form button:hover {
        background: #4534fe;
      }

      form :where(input, select, button) {
        width: 100%;
        outline: none;
        border-radius: 5px;
        border: none;
        margin-bottom: 15px;
        margin-top: 15px;
      }

      form p {
        font-size: 18px;
        margin-bottom: 5px;
      }

      form input:focus {
        padding: 0 14px;
        border: 2px solid #675afe;
      }

      .from,
      .to {
        flex: 1;
        margin-right: 10px; /* Adjust as needed for spacing */
      }

      .custom-input {
        display: flex;
        gap: 10px;
        align-items: center;
      }

      .custom-input input {
        flex: 3;
      }

      form .drop-list {
        display: flex;
        margin-top: 20px;
        align-items: center;
        justify-content: space-between;
      }

      .drop-list {
        display: flex;
        align-items: center; /* Center vertically */
        justify-content: center; /* Center horizontally */
        height: 10vh; /* Set the height to 100% of the viewport height */
        /*margin: 0; /* Remove any existing margin */
      }

      .center-content {
        display: flex;
        align-items: center;
        justify-content: center;
      }
    </style>
  </head>

  <body>
    <!-- New navigation menu -->
    <div class="nav">
      <a href="{% url 'payment_details' %}" onclick="showContent('swap')"
        >Send</a
      >
      <a href="#" onclick="showContent('exchange-rate-new')">Exchange Rate</a>
      <a
        href="{% url 'payment_details' %}#transaction"
        onclick="showContent('transaction')"
        >Transaction</a
      >
    </div>

    <!-- Content containers -->
    <div class="container mt-5">
      <div class="tab-content mt-2">
        <!-- Exchange Rate Content -->
        <div class="tab-pane fade content show active" id="exchange-rate-new">
          <div class="row justify-content-center">
            <div class="col-12 col-lg-6">
              <div class="mx-auto wrapper">
                <header>Exchange Rate</header>
                <form action="#">
                  <!-- Send Section -->
                  <p>Amount:</p>
                  <div class="from custom-input">
                    <input type="text" value="" />
                  </div>
                  <div class="drop-list center-content">
                    <div class="from">
                      <p>From</p>
                      <div class="select-box">
                        <img
                          src="https://flagcdn.com/48x36/us.png"
                          alt="flag"
                        />
                        <select class="form-select">
                          <!-- Options tag are inserted from JavaScript -->
                          <option value="CAD">CAD</option>
                          <option value="GBP">GBP</option>
                          <option value="NGN">NGN</option>
                          <option value="USD" selected="">USD</option>
                        </select>
                      </div>
                    </div>
                    <div class="icon"><i class="fas fa-exchange-alt"></i></div>
                    <div class="to">
                      <p>To</p>
                      <div class="select-box">
                        <img
                          src="https://flagcdn.com/48x36/np.png"
                          alt="flag"
                        />
                        <select class="form-select">
                          <!-- Options tag are inserted from JavaScript -->
                          <option value="CAD">CAD</option>
                          <option value="GBP">GBP</option>
                          <option value="NGN">NGN</option>
                          <option value="USD">USD</option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <!-- Recipient Section -->

                  <div class="transaction-fee" id="transactionFee"></div>

                  <p class="exchange-rate"></p>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- Transaction Content -->
        <div class="tab-pane fade content" id="transaction">
          <div class="row justify-content-center">
            <div class="col-12 col-lg-6">
              <div class="mx-auto wrapper">
                <header>Send wale</header>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      /* Your existing JavaScript code remains unchanged */

      // Function to show/hide content based on navigation
      function showContent(contentId) {
        var contents = document.getElementsByClassName("content");
        for (var i = 0; i < contents.length; i++) {
          contents[i].classList.remove("active");
        }

        var contentToShow = document.getElementById(contentId);
        contentToShow.classList.add("active");
      }
    </script>
    <script>
      let country_list = {
        CAD: "CA",
        GBP: "GB",
        NGN: "NG",
        USD: "US",
      };

      const dropList = document.querySelectorAll("form select"),
        fromCurrency = document.querySelector(".from select"),
        toCurrency = document.querySelector(".to select"),
        getButton = document.querySelector("form button"),
        amountInput = document.querySelector("form input");

      for (let i = 0; i < dropList.length; i++) {
        for (let currency_code in country_list) {
          let selected =
            i == 0
              ? currency_code == "USD"
                ? "selected"
                : ""
              : currency_code == "NPR"
              ? "selected"
              : "";
          let optionTag = `<option value="${currency_code}" ${selected}>${currency_code}</option>`;
          dropList[i].insertAdjacentHTML("beforeend", optionTag);
        }
        dropList[i].addEventListener("change", (e) => {
          loadFlag(e.target);
        });
      }

      function loadFlag(element) {
        for (let code in country_list) {
          if (code == element.value) {
            let imgTag = element.parentElement.querySelector("img");
            imgTag.src = `https://flagcdn.com/48x36/${country_list[
              code
            ].toLowerCase()}.png`;
          }
        }
      }

      window.addEventListener("load", () => {
        getExchangeRate();
      });
      fromCurrency.addEventListener("change", () => {
        getExchangeRate(form);
      });

      toCurrency.addEventListener("change", () => {
        getExchangeRate(form);
      });

      fromCurrency.addEventListener("change", () => {
        loadFlag(fromCurrency);
        getExchangeRate();
      });

      toCurrency.addEventListener("change", () => {
        loadFlag(toCurrency);
        getExchangeRate();
      });

      amountInput.addEventListener("input", () => {
        let inputValue = amountInput.value.trim();
        // Allow only numbers (including decimals)
        amountInput.value = inputValue.replace(/[^0-9.]/g, "");

        getExchangeRate();
      });

      amountInput.addEventListener("input", () => {
        if (amountInput.value.trim() === "") {
          clearExchangeRate();
        }
      });

      getButton.addEventListener("click", (e) => {
        e.preventDefault();
        getExchangeRate();
      });

      const exchangeIcon = document.querySelector("form .icon");
      exchangeIcon.addEventListener("click", () => {
        let tempCode = fromCurrency.value;
        fromCurrency.value = toCurrency.value;
        toCurrency.value = tempCode;
        loadFlag(fromCurrency);
        loadFlag(toCurrency);
        getExchangeRate();
      });

      function getExchangeRate() {
        const exchangeRateTxt = document.querySelector("form .exchange-rate");
        const transactionFeeInput = document.getElementById("transactionFee");
        let amountVal = amountInput.value.trim();

        if (amountVal === "") {
          clearExchangeRate();
          return;
        }

        exchangeRateTxt.innerText = "Getting exchange rate...";
        let url = `https://v6.exchangerate-api.com/v6/b660905cac3ae9db40d489d8/latest/${fromCurrency.value}`;

        fetch(url)
          .then((response) => response.json())
          .then((result) => {
            let exchangeRate = result.conversion_rates[toCurrency.value];
            let totalExRate = (amountVal * exchangeRate).toFixed(2);

            let feeAmount = (transactionFeeInput.value / 100) * totalExRate;
            feeAmount = feeAmount.toFixed(2);
            let totalAmountWithFee = (
              parseFloat(totalExRate) + parseFloat(feeAmount)
            ).toFixed(2);

            exchangeRateTxt.innerText = `${amountVal} ${fromCurrency.value} = ${totalExRate} ${toCurrency.value}`;
          })
          .catch(() => {
            exchangeRateTxt.innerText = "Something went wrong";
          });
      }

      function clearExchangeRate() {
        const exchangeRateTxt = document.querySelector("form .exchange-rate");
        exchangeRateTxt.innerText = "";
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Get the tab element by its ID
        var exchangeRateTab = document.getElementById("exchange-rate-new");

        // Add the 'show' and 'active' classes to make it the default selected tab
        exchangeRateTab.classList.add("show", "active");
      });
    </script>
  </body>
</html>
